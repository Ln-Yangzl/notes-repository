## 媒体访问控制

### ALOHA

#### 无限用户

吞吐率S是负载G与传送成功概率的乘积，即S＝GP~0~

帧时为1时最大吞吐率为1。

负载G传送成功（即一个帧时内没有其他新帧生成，不发生冲突）的概率P~0~=e^-G^。

#### S-ALOHA

S=Ge^-G^

### 载波监听多路访问(CSMA)

0-坚持(非坚持)CSMA

1. 若媒体空闲就传输；否则，转到第2步。
2. 若媒体忙，等待一段随机的重传延迟时间，重复第1步。（客气）

问题：媒体空闲时间可能被浪费掉，访问延迟更长。

1-坚持CSMA

1. 若媒体空闲就传输；否则，转到第2步。
2. 若媒体忙则继续监听，直到检测到信道空闲然后立即传输。（粗鲁）
3. 如果有冲突，则等待一段随机的时间后重复第1步。

问题：两个站点同时发现忙？

P-坚持CSMA

1. 若媒体空闲，以概率P传输，以概率(1-P)延迟一个时间单位(该时间单位通常等于最大的传播延迟的两倍)。
2. 若媒体忙，继续监听直到信道空闲并重复第1步。
3. 若传输延迟了一个时间单位，则重复第1步。

### CSMA/CD(Collision Detect)

- 等待不同的时槽数(k)后重新尝试，通过随机选择时槽random(0,K)来避免同时尝试。
  - 实际等待时间=k*时槽时间
- 基本思想是根据冲突次数来估计信道的负载：低负载时选择较小的K，重负载时选择较大的K。
  - 第一次冲突产生后，每个站点等待0或1个时槽后尝试重新发送；
  - 如果每个站点等待的时槽数相同，将再次冲突，从0、1、2、3中随机挑选一个数作为等待的时槽数；
  - i≤10次冲突后，等待的时槽数从0～2i-1中随机选出；
  - 如果冲突的次数达到10次后，随机等待的最大时槽数固定为1023；
  - 16次冲突后，站点放弃传输，并报告一个错误。

<img src="https://ln-markdown-image-bucket.oss-cn-beijing.aliyuncs.com/img/image-20220110145119395.png" alt="image-20220110145119395" style="zoom:80%;" />

